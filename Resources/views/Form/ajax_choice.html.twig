{% trans_default_domain 'ImaticFormBundle' %}

{% block imatic_type_ajax_choice_widget %}
    <input
        type="hidden" {{ block('widget_attributes') }}
        value="{{ value }}"
        data-imatic-form-ajax-choice="{{ {
            multiple: multiple,
            allowClear: allow_clear,
            placeholder: placeholder|default('select2.placeholder'|trans),
            ajaxPath: ajax_path,
            ajaxRequestFormat: 'filter',
            initialValue: initial_value,
            formatSearching: 'select2.searching'|trans ~ '...',
            formatInputTooShort: 'select2.inputTooShort'|trans,
            formatNoMatches: 'select2.noMatches'|trans
        }|json_encode }}"
    >
    {{ block('form_message') }}
{% endblock %}

{% block imatic_type_ajax_choice_javascript %}
    <script type="text/javascript">
    $(function () {
        var $field = $(document.getElementById({{ id|json_encode|raw }}));

        {% block imatic_type_ajax_choice_javascript_prototype %}
            Imatic.Form.AjaxChoice.init($field[0]);
        {% endblock %}
    });
    </script>
{% endblock %}

{% block imatic_type_ajax_entity_choice_widget block('imatic_type_ajax_choice_widget') %}
{% block imatic_type_ajax_entity_choice_javascript block('imatic_type_ajax_choice_javascript') %}
{% block imatic_type_ajax_entity_choice_javascript_prototype block('imatic_type_ajax_choice_javascript_prototype') %}
